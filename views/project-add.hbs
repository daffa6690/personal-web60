{{!-- {{#>layout}}
  <h1 class="text-center pt-2"><b>ADD MY PROJECT</b></h1>
  <!-- FORM -->
  <form action='/project-add' method="post" enctype="multipart/form-data" onsubmit=''>
    <div class='form-field'>
      <label for='name'>Project Name</label>
      <input type='text' id='name' name="name" required />
    </div>

    <div class='form-date'>
      <div class='start'>
        <label for='start'>Start Date</label>
        <input type='date' id='start' name="start" required />
      </div>
      <div class='end'>
        <label for='end'>End Date</label>
        <input type='date' id='end' name="end" required />
      </div>
    </div>
    <div class='form-field'>
      <label for='description'>Description</label>
      <textarea name='description' id='description' rows='5' required></textarea>
    </div>
    <div class='form-field-tech'>
      <label for='technologies'>Technologies</label>
      <div class='grid-container'>
        <div class='grid'>
          <input type='checkbox' id='nodejs' value='nodejs.png' name='technologies' />
          <label for='nodejs'>Node JS</label>
        </div>
        <div class='grid'>
          <input type='checkbox' id='express' value='express.png' name='technologies' />
          <label for='express'>ExpressJS</label>
        </div>
        <div class='grid'>
          <input type='checkbox' id='reactjs' value='reactjs.png' name='technologies' />
          <label for='reactjs'>React JS</label>
        </div>
        <div class='grid'>
          <input type='checkbox' id='typescript' value='typescript.png' name='technologies' />
          <label for='typescript'>TypeScript</label>
        </div>
      </div>
    </div>
    <div class='form-field'>
      <label for='image'>Upload Image</label>
      <input type='file' id='image' name='image' required />
    </div>
    <div class='text-end mb-5'>
      <button class='btn btn-dark' type='submit'>submit</button>
    </div>
  </form>
  {{/layout}} --}}

  {{#>layout}}
  <h1 class="text-center pt-2"><b>ADD MY PROJECT</b></h1>
  <!-- FORM -->
  <form action='/project-add' method="post" enctype="multipart/form-data" onsubmit='return validateForm()'>
    <div class='form-field'>
      <label for='name'>Project Name</label>
      <input type='text' id='name' name="name" required />
    </div>

    <div class='form-date'>
      <div class='start'>
        <label for='start'>Start Date</label>
        <input type='date' id='start' name="start" required />
      </div>
      <div class='end'>
        <label for='end'>End Date</label>
        <input type='date' id='end' name="end" required />
      </div>
    </div>
    <div class='form-field'>
      <label for='description'>Description</label>
      <textarea name='description' id='description' rows='5' required></textarea>
    </div>
    <div class='form-field-tech'>
      <label for='technologies'>Technologies</label>
      <div class='grid-container'>
        <div class='grid'>
          <input type='checkbox' id='nodejs' value='assets/img/nodejs.png' name='technologies' />
          <label for='nodejs'>Node JS</label>
        </div>
        <div class='grid'>
          <input type='checkbox' id='express' value='assets/img/express.png' name='technologies' />
          <label for='express'>ExpressJS</label>
        </div>
        <div class='grid'>
          <input type='checkbox' id='reactjs' value='assets/img/reactjs.png' name='technologies' />
          <label for='reactjs'>React JS</label>
        </div>
        <div class='grid'>
          <input type='checkbox' id='typescript' value='assets/img/typescript.png' name='technologies' />
          <label for='typescript'>TypeScript</label>
        </div>
      </div>
    </div>
    <div class='form-field'>
      <label for='image'>Upload Image</label>
      <input type='file' id='image' name='image' accept="image/*" required onchange="previewImage()" />
      <br />
      <img id="imagePreview" src="" alt="Preview" style="display: none; max-width: 200px; margin-top: 10px;">
    </div>
    <div class='text-end mb-5'>
      <button class='btn btn-dark' type='submit'>Submit</button>
    </div>
  </form>

  <script>
    function validateForm() {
      let startDate = document.getElementById("start").value;
      let endDate = document.getElementById("end").value;
      let checkboxes = document.querySelectorAll("input[name='technologies']:checked");

      if (new Date(startDate) > new Date(endDate)) {
        alert("Start Date tidak boleh lebih besar dari End Date.");
        return false;
      }

      if (checkboxes.length === 0) {
        alert("Pilih setidaknya satu teknologi.");
        return false;
      }

      return true;
    }

    function previewImage() {
      let fileInput = document.getElementById("image");
      let preview = document.getElementById("imagePreview");
      let file = fileInput.files[0];

      if (file) {
        let reader = new FileReader();
        reader.onload = function(e) {
          preview.src = e.target.result;
          preview.style.display = "block";
        };
        reader.readAsDataURL(file);
      } else {
        preview.src = "";
        preview.style.display = "none";
      }
    }
  </script>
{{/layout}}
